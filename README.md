# Restaurant Intelligence Engine — Build & Run

This workspace contains a Python script / notebook-style file (`# %%` cells) that generates a full demo dataset and analysis for a restaurant consulting example.

Prerequisites
- Python 3.10+ installed (3.11 recommended)
- VS Code with the **Python** extension (recommended) or Jupyter (lab or notebook)

Quick setup (recommended: VS Code)

1. Create and activate a virtual environment

```bash
python3 -m venv .venv
source .venv/bin/activate
```

2. Install dependencies

```bash
pip install -r requirements.txt
```

3. Open the folder in VS Code
- Open the file `# %% [markdown].py` (the file contains `# %%` cell markers)
- The Python extension will show a "Run Cell" / Notebook UI for `# %%` cells. Use that to run cells top-to-bottom.

Run in Jupyter (alternative)

```bash
# from the activated venv
pip install jupyterlab
jupyter lab
# then open the workspace folder and the .py file in the editor (VS Code style cells) or convert to .ipynb via jupytext if desired
```

Notes and tips
- The file uses `display()` for nicer interactive output — that works in VS Code Notebook or Jupyter. Running the file as a plain `python file.py` may fail because `display()` is provided by interactive kernels.
- Default mode: `DATA_SOURCE = "synthetic"` (no external data required). To use real client files, set `DATA_SOURCE = "client"` and fill the paths in the `CONFIG` dict:
  - `CONFIG["client_menu_path"]`
  - `CONFIG["client_sales_path"]`
  - `CONFIG["client_waste_path"]` (optional)

Quick note about runners and outputs
-----------------------------------

The repository provides two simple runners with predictable, file-based outputs:

- `example_main.py` — runs the engine on synthetic/demo data and writes outputs to `./output`.
- `run_client.py` — strict client-mode runner; runs the engine on client data and writes outputs to `./output_client`. This runner will raise an error and exit if the configured client files do not exist (it will not fall back to synthetic data).

Both runners write the following when available:

- CSV tables (e.g. `menu_df.csv`, `orders_df.csv`, `perf_df.csv`, `staff_df.csv`, `bookings_df.csv`, `waste_df.csv`) into the output folder.
- `gpt_export_block.txt` — the consultant-friendly text block you can paste into an LLM.
- `report_data.xlsx` — a multi-sheet Excel workbook (includes `Menu_Performance`, `Category_Summary`, `Staff_Performance`, `Booking_Summary`, `Waste`). If data-quality diagnostics are present the workbook also contains `Data_Quality` and `Data_Quality_Notes` sheets.
- `data_quality_diagnostics.json` and `data_quality_notes.txt` when diagnostics are generated by the engine.
- `time_notes.txt` when time-based analysis produces human-readable notes.
- Charts as PNG files (if `save_all_charts()` is invoked) — e.g. `category_revenue_and_gp.png`, `menu_engineering.png`, `top_waste_items.png`, `booking_covers_by_day.png`, `scenario_gp_changes.png`.

Do NOT change the filenames or output paths unless you want to update the code that writes them. If you'd like, I can add CLI flags to both runners to change output directories at runtime.

Optional: run headless (non-interactive)
- If you want a single-run script (no `display()`), I can add a `run_demo.py` that prints summaries and writes CSV outputs. Tell me if you want that and I will add it.

Common commands summary

```bash
# create venv and install
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt

# Open VS Code
code .

# Or start jupyter lab
jupyter lab
```

If you want, I can:
- add a headless runner `run_demo.py` that writes `perf.csv`, `summary.json`, etc.
- convert the `.py` to a `.ipynb` for direct notebook usage
- modify `# %% [markdown].py` to remove `display()` so it runs with `python` directly

Tell me which of those you prefer and I'll implement it.